<!doctype html><html lang=es-es><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link id=syntax-style data-base=https://iot-embebidos.cl/ rel=stylesheet href=https://iot-embebidos.cl/css/github.css><link rel=preload as=font href=https://iot-embebidos.cl/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://iot-embebidos.cl/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://iot-embebidos.cl/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://iot-embebidos.cl/main.1958b84c3bb866f10bb7eaa989fce0d71c84c89d66df0596ef3685eb25b68619abe2cd8ba740400cf1e105f1867792556c59cabc29848fafa108e282e3305dcf.css integrity="sha512-GVi4TDu4ZvELt+qpifzg1xyEyJ1m3wWW7zaF6yW2hhmr4s2Lp0BADPHhBfGGd5JVbFnKvCmEj6+hCOKC4zBdzw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Pasos a seguir - IoT - Embebidos</title><meta name=description content="La mejor fuente de informacion para el codigo de BLE en ESP32 es el codigo de ejemplo de Espressif, el cual se encuentra en el siguiente:
Ejemplo BLE. Ahora veremos de forma resumida los pasos que deben realizar para poder realizar la primera comunicacion bluetooth entre el ESP32 y la Raspberry Pi.
Paso 1: Configurar el ESP32 # Primero debemos configurar el ESP32 para que pueda funcionar como servidor BLE, para esto pueden usar el ejemplo de esp-idf de arriba."><link rel=canonical href=https://iot-embebidos.cl/iot/ble/walkthrough/><meta property="og:locale" content="es_CL"><meta property="og:type" content="article"><meta property="og:title" content="Pasos a seguir"><meta property="og:description" content="La mejor fuente de informacion para el codigo de BLE en ESP32 es el codigo de ejemplo de Espressif, el cual se encuentra en el siguiente:
Ejemplo BLE. Ahora veremos de forma resumida los pasos que deben realizar para poder realizar la primera comunicacion bluetooth entre el ESP32 y la Raspberry Pi.
Paso 1: Configurar el ESP32 # Primero debemos configurar el ESP32 para que pueda funcionar como servidor BLE, para esto pueden usar el ejemplo de esp-idf de arriba."><meta property="og:url" content="https://iot-embebidos.cl/iot/ble/walkthrough/"><meta property="og:site_name" content="IoT - Embebidos"><meta property="article:published_time" content="2023-10-03T18:35:25+00:00"><meta property="article:modified_time" content="2023-10-03T18:35:25+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="dccuchile"><meta name=twitter:creator content="dccuchile"><meta name=twitter:title content="Pasos a seguir"><meta name=twitter:description content><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Pasos a seguir"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://iot-embebidos.cl/#/schema/organization/1","name":"Doks","url":"https://iot-embebidos.cl/","sameAs":["https://twitter.com/getdoks","https://github.com/alberto-abarzua/apunte-iot-embebidos"],"logo":{"@type":"ImageObject","@id":"https://iot-embebidos.cl/#/schema/image/1","url":"https://iot-embebidos.cl/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://iot-embebidos.cl/#/schema/image/1"}},{"@type":"WebSite","@id":"https://iot-embebidos.cl/#/schema/website/1","url":"https://iot-embebidos.cl/","name":"IoT - Embebidos","description":"","publisher":{"@id":"https://iot-embebidos.cl/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://iot-embebidos.cl/iot/ble/walkthrough/","url":"https://iot-embebidos.cl/iot/ble/walkthrough/","name":"Pasos a seguir","description":"","isPartOf":{"@id":"https://iot-embebidos.cl/#/schema/website/1"},"about":{"@id":"https://iot-embebidos.cl/#/schema/organization/1"},"datePublished":"2023-10-03T18:35:25CET","dateModified":"2023-10-03T18:35:25CET","breadcrumb":{"@id":"https://iot-embebidos.cl/iot/ble/walkthrough/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://iot-embebidos.cl/iot/ble/walkthrough/#/schema/image/2"},"inLanguage":"es-CL","potentialAction":[{"@type":"ReadAction","target":["https://iot-embebidos.cl/iot/ble/walkthrough/"]}]},{"@type":"BreadcrumbList","@id":"https://iot-embebidos.cl/iot/ble/walkthrough/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://iot-embebidos.cl/","url":"https://iot-embebidos.cl/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://iot-embebidos.cl/iot/","url":"https://iot-embebidos.cl/iot/","name":"Iot"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://iot-embebidos.cl/iot/ble/","url":"https://iot-embebidos.cl/iot/ble/","name":"Ble"}},{"@type":"ListItem","position":4,"item":{"@id":"https://iot-embebidos.cl/iot/ble/walkthrough/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://iot-embebidos.cl/iot/ble/walkthrough/#/schema/image/2","url":null,"contentUrl":null,"caption":"Pasos a seguir"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://iot-embebidos.cl/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://iot-embebidos.cl/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://iot-embebidos.cl/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://iot-embebidos.cl/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://iot-embebidos.cl/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://iot-embebidos.cl/site.webmanifest></head><body class="iot single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=https://iot-embebidos.cl/ aria-label="IoT - Embebidos">IoT - Embebidos</a>
<button class="btn btn-link order-0 ms-auto d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasExample aria-controls=offcanvasExample><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasExample aria-labelledby=offcanvasExampleLabel><div class=header-bar></div><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasExampleLabel>iot</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf89f6756d11a04ddc3bbac67a272020 aria-expanded=false>
Inicio</button><div class=collapse id=section-bf89f6756d11a04ddc3bbac67a272020><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/instalacion_esp_idf/>Instalacion ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/configuracion_rasp/>Configuracion de la Raspberry Pi</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f4a6157140dff379372aabcc57a3b08b aria-expanded=false>
ESP-IDF</button><div class=collapse id=section-f4a6157140dff379372aabcc57a3b08b><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/correr_ejemplo/>Hello World!</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/primer_programa/>Primer Programa</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/logeo/>Prints y Logeo</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/componentes/>Como dividir el codigo en componentes</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/memoria_no_volatil/>Memoria no volátil</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/deep_sleep/>Delays, Deep Sleep y Reinicio</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/como_buscar_ejemplos/>Como buscar ejemplos en ESP-IDF</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-dbbd91fb2aed7056f4aeac45a5452357 aria-expanded=false>
Wifi</button><div class=collapse id=section-dbbd91fb2aed7056f4aeac45a5452357><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/esp_wifi/>Primera Conexión WiFi</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/ejemplo_tcp/>Cliente y Server TCP</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8de8a62c3191fb6cf61e0ac4b2b59045 aria-expanded=true>
BLUETOOTH</button><div class="collapse show" id=section-8de8a62c3191fb6cf61e0ac4b2b59045><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/estructura/>Estructura General</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/eventos/>Eventos</a></li><li><a class="docs-link rounded active" href=https://iot-embebidos.cl/iot/ble/walkthrough/>Pasos a seguir</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fa33a1f2be10005d07ff40ad5c07833 aria-expanded=false>
Tareas</button><div class=collapse id=section-8fa33a1f2be10005d07ff40ad5c07833><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/evaluaciones/>Detalles de Evaluacion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t1/>Tarea 1</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t2/>Tarea 2</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7690392266ce928e0f4dea767a80b88f aria-expanded=false>
Auxiliares</button><div class=collapse id=section-7690392266ce928e0f4dea767a80b88f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux1/>Auxiliar 1 - WiFi y ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux2/>Auxiliar 2 - Bluetooth Low Energy</a></li></ul></div></li></ul></nav></aside></div></div><button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://iot-embebidos.cl/>IoT - Embebidos</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle ps-0 py-1" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Iot
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></a><ul class="dropdown-menu dropdown-menu-main shadow rounded border-0" aria-labelledby=navbarDropdownMenuLink><li><a class=dropdown-item href=https://iot-embebidos.cl/iot/inicio/intro/>Apunte</a></li><li><a class=dropdown-item href=https://iot-embebidos.cl/iot/tareas/>Tareas</a></li><li><a class=dropdown-item href=https://iot-embebidos.cl/iot/auxiliares/>Auxiliares</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle ps-0 py-1" href=# id=navbarDropdownMenuLink role=button data-bs-toggle=dropdown aria-expanded=false>Embebidos
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></a><ul class="dropdown-menu dropdown-menu-main shadow rounded border-0" aria-labelledby=navbarDropdownMenuLink><li><a class=dropdown-item href=https://iot-embebidos.cl/embebidos/inicio/intro/>Apunte</a></li></ul></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder aria-label autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://github.com/alberto-abarzua/apunte-iot-embebidos><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul><hr class="text-black-50 my-4 d-lg-none"><button id=mode class="btn btn-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></div></div></nav></header></div><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf89f6756d11a04ddc3bbac67a272020 aria-expanded=false>
Inicio</button><div class=collapse id=section-bf89f6756d11a04ddc3bbac67a272020><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/instalacion_esp_idf/>Instalacion ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/configuracion_rasp/>Configuracion de la Raspberry Pi</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f4a6157140dff379372aabcc57a3b08b aria-expanded=false>
ESP-IDF</button><div class=collapse id=section-f4a6157140dff379372aabcc57a3b08b><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/correr_ejemplo/>Hello World!</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/primer_programa/>Primer Programa</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/logeo/>Prints y Logeo</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/componentes/>Como dividir el codigo en componentes</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/memoria_no_volatil/>Memoria no volátil</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/deep_sleep/>Delays, Deep Sleep y Reinicio</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/como_buscar_ejemplos/>Como buscar ejemplos en ESP-IDF</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-dbbd91fb2aed7056f4aeac45a5452357 aria-expanded=false>
Wifi</button><div class=collapse id=section-dbbd91fb2aed7056f4aeac45a5452357><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/esp_wifi/>Primera Conexión WiFi</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/ejemplo_tcp/>Cliente y Server TCP</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8de8a62c3191fb6cf61e0ac4b2b59045 aria-expanded=true>
BLUETOOTH</button><div class="collapse show" id=section-8de8a62c3191fb6cf61e0ac4b2b59045><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/estructura/>Estructura General</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/eventos/>Eventos</a></li><li><a class="docs-link rounded active" href=https://iot-embebidos.cl/iot/ble/walkthrough/>Pasos a seguir</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fa33a1f2be10005d07ff40ad5c07833 aria-expanded=false>
Tareas</button><div class=collapse id=section-8fa33a1f2be10005d07ff40ad5c07833><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/evaluaciones/>Detalles de Evaluacion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t1/>Tarea 1</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t2/>Tarea 2</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7690392266ce928e0f4dea767a80b88f aria-expanded=false>
Auxiliares</button><div class=collapse id=section-7690392266ce928e0f4dea767a80b88f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux1/>Auxiliar 1 - WiFi y ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux2/>Auxiliar 2 - Bluetooth Low Energy</a></li></ul></div></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-lg-block"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-bf89f6756d11a04ddc3bbac67a272020 aria-expanded=false>
Inicio</button><div class=collapse id=section-bf89f6756d11a04ddc3bbac67a272020><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/instalacion_esp_idf/>Instalacion ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/inicio/configuracion_rasp/>Configuracion de la Raspberry Pi</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-f4a6157140dff379372aabcc57a3b08b aria-expanded=false>
ESP-IDF</button><div class=collapse id=section-f4a6157140dff379372aabcc57a3b08b><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/correr_ejemplo/>Hello World!</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/primer_programa/>Primer Programa</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/logeo/>Prints y Logeo</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/componentes/>Como dividir el codigo en componentes</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/memoria_no_volatil/>Memoria no volátil</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/deep_sleep/>Delays, Deep Sleep y Reinicio</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/esp_idf/como_buscar_ejemplos/>Como buscar ejemplos en ESP-IDF</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-dbbd91fb2aed7056f4aeac45a5452357 aria-expanded=false>
Wifi</button><div class=collapse id=section-dbbd91fb2aed7056f4aeac45a5452357><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/esp_wifi/>Primera Conexión WiFi</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/wifi/ejemplo_tcp/>Cliente y Server TCP</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8de8a62c3191fb6cf61e0ac4b2b59045 aria-expanded=true>
BLUETOOTH</button><div class="collapse show" id=section-8de8a62c3191fb6cf61e0ac4b2b59045><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/intro/>Introduccion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/estructura/>Estructura General</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/ble/eventos/>Eventos</a></li><li><a class="docs-link rounded active" href=https://iot-embebidos.cl/iot/ble/walkthrough/>Pasos a seguir</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8fa33a1f2be10005d07ff40ad5c07833 aria-expanded=false>
Tareas</button><div class=collapse id=section-8fa33a1f2be10005d07ff40ad5c07833><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/evaluaciones/>Detalles de Evaluacion</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t1/>Tarea 1</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/tareas/t2/>Tarea 2</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-7690392266ce928e0f4dea767a80b88f aria-expanded=false>
Auxiliares</button><div class=collapse id=section-7690392266ce928e0f4dea767a80b88f><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux1/>Auxiliar 1 - WiFi y ESP-IDF</a></li><li><a class="docs-link rounded" href=https://iot-embebidos.cl/iot/auxiliares/aux2/>Auxiliar 2 - Bluetooth Low Energy</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span></span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#paso-1-configurar-el-esp32>Paso 1: Configurar el ESP32</a></li><li><a href=#paso-2-verificar-que-se-esta-anunciando-el-dispositivo>Paso 2: Verificar que se esta anunciando el dispositivo</a></li><li><a href=#paso-3-la-primera-conexion>Paso 3: La primera conexion</a></li><li><a href=#paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades>Paso 4: Modificar el codigo de ejemplo de esp-idf a sus necesidades</a></li><li><a href=#cosas-que-pueden-resultar-utiles--notificaciones>Cosas que pueden resultar utiles | Notificaciones</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3></h3><nav id=TableOfContents><ul><li><a href=#paso-1-configurar-el-esp32>Paso 1: Configurar el ESP32</a></li><li><a href=#paso-2-verificar-que-se-esta-anunciando-el-dispositivo>Paso 2: Verificar que se esta anunciando el dispositivo</a></li><li><a href=#paso-3-la-primera-conexion>Paso 3: La primera conexion</a></li><li><a href=#paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades>Paso 4: Modificar el codigo de ejemplo de esp-idf a sus necesidades</a></li><li><a href=#cosas-que-pueden-resultar-utiles--notificaciones>Cosas que pueden resultar utiles | Notificaciones</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Pasos a seguir</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span></span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#paso-1-configurar-el-esp32>Paso 1: Configurar el ESP32</a></li><li><a href=#paso-2-verificar-que-se-esta-anunciando-el-dispositivo>Paso 2: Verificar que se esta anunciando el dispositivo</a></li><li><a href=#paso-3-la-primera-conexion>Paso 3: La primera conexion</a></li><li><a href=#paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades>Paso 4: Modificar el codigo de ejemplo de esp-idf a sus necesidades</a></li><li><a href=#cosas-que-pueden-resultar-utiles--notificaciones>Cosas que pueden resultar utiles | Notificaciones</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3></h3><nav id=TableOfContents><ul><li><a href=#paso-1-configurar-el-esp32>Paso 1: Configurar el ESP32</a></li><li><a href=#paso-2-verificar-que-se-esta-anunciando-el-dispositivo>Paso 2: Verificar que se esta anunciando el dispositivo</a></li><li><a href=#paso-3-la-primera-conexion>Paso 3: La primera conexion</a></li><li><a href=#paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades>Paso 4: Modificar el codigo de ejemplo de esp-idf a sus necesidades</a></li><li><a href=#cosas-que-pueden-resultar-utiles--notificaciones>Cosas que pueden resultar utiles | Notificaciones</a></li></ul></nav></div></nav><p>La mejor fuente de informacion para el codigo de BLE en ESP32 es el codigo de ejemplo de Espressif, el cual se encuentra en el siguiente:</p><ul><li><a href=https://github.com/espressif/esp-idf/blob/master/examples/bluetooth/bluedroid/ble/gatt_server/tutorial/Gatt_Server_Example_Walkthrough.md>Ejemplo BLE</a>.</li></ul><p>Ahora veremos de forma resumida los pasos que deben realizar para poder realizar la primera comunicacion bluetooth entre el ESP32 y la Raspberry Pi.</p><h2 id=paso-1-configurar-el-esp32>Paso 1: Configurar el ESP32 <a href=#paso-1-configurar-el-esp32 class=anchor aria-hidden=true>#</a></h2><p>Primero debemos configurar el ESP32 para que pueda funcionar como servidor BLE, para esto pueden usar el ejemplo de esp-idf de arriba.</p><h2 id=paso-2-verificar-que-se-esta-anunciando-el-dispositivo>Paso 2: Verificar que se esta anunciando el dispositivo <a href=#paso-2-verificar-que-se-esta-anunciando-el-dispositivo class=anchor aria-hidden=true>#</a></h2><p>Para verificar que el ESP32 esta funcionando como servidor BLE pueden ver en el listado de dispositivos bluetooth de su computador, en el caso de linux puede usar el siguiente comando:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bluetoothctl
</span></span><span class=line><span class=cl><span class=c1># Luego dentro de bluetoothctl</span>
</span></span><span class=line><span class=cl>scan on
</span></span><span class=line><span class=cl>power on
</span></span><span class=line><span class=cl>scan on
</span></span></code></pre></div><p>Corriendo esto llegaran a un output como este, donde podran ver el nombre de su dispositivo, en este caso como es el codigo de ejemplo tenemos <code>ESP_GATTS_DEMO</code>, con esto podemos ver que la direccion MAC del dispositivo es <code>4C:EB:D6:62:18:3A</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>CHG<span class=o>]</span> Controller F4:26:79:A4:D7:3C Discovering: yes
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 63:7A:9F:47:21:B4 63-7A-9F-47-21-B4
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 4C:EB:D6:62:18:3A ESP_GATTS_DEMO
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 76:F1:5D:9E:AA:2E 76-F1-5D-9E-AA-2E
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 61:B0:AA:2F:04:15 61-B0-AA-2F-04-15
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 45:8B:AE:F1:22:C7 45-8B-AE-F1-22-C7
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 18:FA:B7:4B:59:28 alberto_iphone
</span></span><span class=line><span class=cl><span class=o>[</span>NEW<span class=o>]</span> Device 2C:41:A1:27:09:57 LE-Bose Revolve SoundLink
</span></span></code></pre></div><p>Esto funcionara en linux (Incluyendo la Raspberry Pi), tambien existen aplicaciones moviles que permiten ver los dispositivos BLE (lo pueden buscar como BLE scanner en la tienda de aplicaciones de su celular).</p><h2 id=paso-3-la-primera-conexion>Paso 3: La primera conexion <a href=#paso-3-la-primera-conexion class=anchor aria-hidden=true>#</a></h2><p>Ahora que sabemos que funciona correctamente nuestro dispositivo BLE podemos empezar a programar tanto el cliente como el servidor.</p><p>Por el lado de python existen varias librerias, una de estas puede ser <code>bleak</code>, un breve ejemplo de la documentacion de bleak es el siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>bleak</span> <span class=kn>import</span> <span class=n>BleakClient</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ADDRESS</span> <span class=o>=</span> <span class=s2>&#34;24:71:89:cc:09:05&#34;</span>
</span></span><span class=line><span class=cl><span class=n>CHARACTERISTIC_UUID</span> <span class=o>=</span> <span class=s2>&#34;0xFF01&#34;</span> <span class=c1># Busquen este valor en el codigo de ejemplo de esp-idf </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>ADDRESS</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>BleakClient</span><span class=p>(</span><span class=n>ADDRESS</span><span class=p>)</span> <span class=k>as</span> <span class=n>client</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>char_value</span> <span class=o>=</span> <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>read_gatt_char</span><span class=p>(</span><span class=n>CHARACTERISTIC_UUID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Characterisic A </span><span class=si>{0}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=nb>chr</span><span class=p>,</span> <span class=n>char_value</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>        <span class=c1># Luego podemos escribir en la caracteristica</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span> <span class=o>=</span> <span class=s1>&#39;Hello World!&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>write_gatt_char</span><span class=p>(</span><span class=n>CHARACTERISTIC_UUID</span><span class=p>,</span> <span class=sa>b</span><span class=s2>&#34;</span><span class=se>\x01\x00</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>(</span><span class=n>ADDRESS</span><span class=p>))</span>
</span></span></code></pre></div><p>Este codigo se conecta a un dispositivo con la direccion MAC <code>24:71:89:cc:09:05</code> y lee la caracteristica con UUID <code>0xFF01</code>, el cual corresponde al valor de la caracteristica A del ejemplo de esp-idf.</p><h2 id=paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades>Paso 4: Modificar el codigo de ejemplo de esp-idf a sus necesidades <a href=#paso-4-modificar-el-codigo-de-ejemplo-de-esp-idf-a-sus-necesidades class=anchor aria-hidden=true>#</a></h2><p>Ahora que ya sabemos como conectarnos a un dispositivo BLE desde python, podemos modificar el codigo de ejemplo de esp-idf para que se conecte a la Raspberry Pi y envie los datos que necesitamos.</p><p>Una de las primeras cosas que pueden hacer es ver que ocurre cuando llaman en python las funciones <code>read_gatt_char</code> y <code>write_gatt_char</code>, esto les permitira saber que deben hacer en el codigo de esp-idf.</p><p>Para esto deben ir a la funcion <code>gatts_profile_a_event_handler</code> a los casos del switch case <code>ESP_GATTS_WRITE_EVT</code> y <code>ESP_GATTS_READ_EVT</code>.</p><h2 id=cosas-que-pueden-resultar-utiles--notificaciones>Cosas que pueden resultar utiles | Notificaciones <a href=#cosas-que-pueden-resultar-utiles--notificaciones class=anchor aria-hidden=true>#</a></h2><p>Como se menciono en la seccion anterior, existen notificaciones que se pueden enviar desde el servidor al cliente, esto puede ser util para notificar a la Raspberry Pi que existen datos nuevos para leer.</p><p>En este caso la Raspberry Pi despues de conectarse se puede suscribir a una caracteristica y esperar a recibir una notificacion, esto se puede hacer con la funcion <code>start_notify</code> de la libreria <code>bleak</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Funcion que se llamara cada vez que llegue una notificacion por parte de la ESP</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>notify_callback</span><span class=p>(</span><span class=n>handle</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>expected_data</span> <span class=o>=</span> <span class=sa>b</span><span class=s2>&#34;CHK_DATA&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>expected_data</span> <span class=ow>in</span> <span class=n>value</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Notification received - Checking data&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1># De esta forma pueden hacer que la ESP llame a una funcion de la Raspberry Pi</span>
</span></span><span class=line><span class=cl><span class=k>await</span> <span class=n>client</span><span class=o>.</span><span class=n>start_notify</span><span class=p>(</span><span class=n>CHARACTERISTIC_UUID</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># Luego puede que entren en un while de su servidor y por el fondo se estara llamando a la funcion callback</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Hacer cosas</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></div><p>Con esto la Raspberry Pi puede esperar a recibir una notificacion y luego llamar a una funcion que ustedes definan, en este caso se espera a recibir la notificacion <code>CHK_DATA</code> y luego se llama a la funcion <code>callback</code>.</p><p>Por el lado de la ESP32, esta debe enviar la notificacion, esto se puede hacer con la funcion <code>esp_ble_gatts_send_indicate</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>esp_err_t</span> <span class=nf>send_notify</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=n>notify_data</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// check if connected
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=n>gl_profile_tab</span><span class=p>[</span><span class=n>PROFILE_A_APP_ID</span><span class=p>].</span><span class=n>conn_id</span> <span class=o>==</span>
</span></span><span class=line><span class=cl>        <span class=mh>0xFF</span><span class=p>)</span> <span class=p>{</span>  <span class=c1>// assuming 0xFF is default when not connected
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nf>ESP_LOGE</span><span class=p>(</span><span class=n>GATTS_TAG</span><span class=p>,</span> <span class=s>&#34;Not connected to a client&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ESP_FAIL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>size_t</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>strlen</span><span class=p>(</span><span class=n>notify_data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>esp_err_t</span> <span class=n>ret</span> <span class=o>=</span> <span class=nf>esp_ble_gatts_send_indicate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>gl_profile_tab</span><span class=p>[</span><span class=n>PROFILE_A_APP_ID</span><span class=p>].</span><span class=n>gatts_if</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>gl_profile_tab</span><span class=p>[</span><span class=n>PROFILE_A_APP_ID</span><span class=p>].</span><span class=n>conn_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>gl_profile_tab</span><span class=p>[</span><span class=n>PROFILE_A_APP_ID</span><span class=p>].</span><span class=n>char_handle</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=kt>uint8_t</span> <span class=o>*</span><span class=p>)</span><span class=n>notify_data</span><span class=p>,</span> <span class=nb>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>ret</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>ESP_LOGE</span><span class=p>(</span><span class=n>GATTS_TAG</span><span class=p>,</span> <span class=s>&#34;Send indicate error&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>ESP_LOGI</span><span class=p>(</span><span class=n>GATTS_TAG</span><span class=p>,</span> <span class=s>&#34;Send indicate success&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>ret</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><strong>Nota</strong> Esto es solo codigo de ejemplo y al no tener un contexto completo es unicamente base de inspiracion para su tarea.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=https://iot-embebidos.cl/iot/auxiliares/aux2/><div class="card my-1"><div class="card-body py-2">&larr; Auxiliar 2 - Bluetooth Low Energy</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a>, and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://iot-embebidos.cl/js/bootstrap.min.49deee76074d4074d37d54619d509b36839e1aa4ebf6698c543b5d5645b355076b9713429c9a308a3b216c208da0aa3507af100fa137063b1e6aca3cc2259e27.js integrity="sha512-Sd7udgdNQHTTfVRhnVCbNoOeGqTr9mmMVDtdVkWzVQdrlxNCnJowijshbCCNoKo1B68QD6E3Bjseaso8wiWeJw==" crossorigin=anonymous defer></script>
<script src=https://iot-embebidos.cl/js/highlight.min.b466b1b8ede2d0a4056afb878082ce76615d24638842550085d331e7ccb5938936c655c07063b5e7fafa7527cc0d72ad4460b7057e07ac861bfbf474008de1e5.js integrity="sha512-tGaxuO3i0KQFavuHgILOdmFdJGOIQlUAhdMx58y1k4k2xlXAcGO15/r6dSfMDXKtRGC3BX4HrIYb+/R0AI3h5Q==" crossorigin=anonymous defer></script>
<script src=https://iot-embebidos.cl/main.min.3b95160a7aa65f9fd19ec85a774deb4fc4b4f15d11d7f77a48d8b9b3495ee5bb97606ecb840c119c358980f0920730a504065c0a66e8521ffb533674d7720117.js integrity="sha512-O5UWCnqmX5/Rnshad03rT8S08V0R1/d6SNi5s0le5buXYG7LhAwRnDWJgPCSBzClBAZcCmboUh/7UzZ013IBFw==" crossorigin=anonymous defer></script>
<script src=https://iot-embebidos.cl/index.min.4ae26272486ea46c5bb0bed7a0b434a91b05e8182cfb839a405dd4e647b05ce5d76d401a5103d822d3b1589fc56335cd372b712d97085b8d89aebf244b1b5501.js integrity="sha512-SuJickhupGxbsL7XoLQ0qRsF6Bgs+4OaQF3U5kewXOXXbUAaUQPYItOxWJ/FYzXNNytxLZcIW42Jrr8kSxtVAQ==" crossorigin=anonymous defer></script></body></html>